<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒŸ Factory Game</title>
<style>
body { font-family:'Arial', sans-serif; margin:0; padding:0; background:#e0f7fa; display:flex; justify-content:center; align-items:center; height:100vh; }
.screen { display:none; flex-direction:column; align-items:center; justify-content:flex-start; text-align:center; width:100%; height:100%; padding:10px; box-sizing:border-box; }
#lobby-screen { display:flex; }
h1 { font-size:2.5rem; color:#00796b; margin-bottom:15px; text-shadow:2px 2px #b2dfdb; }
h2 { color:#004d40; margin:10px 0; }
#hud { position:fixed; top:10px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,0.95); padding:10px 20px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.3); font-size:1rem; z-index:999; display:flex; gap:15px; font-weight:bold; flex-wrap:wrap; justify-content:center;}
#game-container, #store-container { background:white; border-radius:20px; padding:20px; box-shadow:6px 6px 16px rgba(0,0,0,0.25); width:90%; max-width:480px; }
button { font-size:1rem; padding:12px 25px; border:none; border-radius:12px; cursor:pointer; margin:6px; color:white; transition:0.2s; box-shadow:0 4px 8px rgba(0,0,0,0.25); font-weight:bold; width:80%; max-width:200px; }
button:hover { transform:translateY(-2px); box-shadow:0 5px 10px rgba(0,0,0,0.35); }
button:active { transform:scale(0.96); }
.upgrade-btn { background:linear-gradient(180deg,#0288d1,#01579b); }
.nav-btn { background:linear-gradient(180deg,#f57c00,#e65100); }
.production-info { font-size:1.1rem; margin:10px 0; font-weight:bold; }
#conveyor { position:relative; width:100%; height:60px; background:#aaa; border-radius:12px; margin:15px auto; overflow:hidden; box-shadow: inset 0 4px 10px rgba(0,0,0,0.25); }
.belt { position:absolute; width:200%; height:100%; background:repeating-linear-gradient(90deg,#888 0 20px,#666 20px 40px); animation:moveBelt 2s linear infinite; }
@keyframes moveBelt { from { left:0; } to { left:-50%; } }
.item { position:absolute; top:12px; font-size:1.8rem; animation:moveItem 6s linear forwards; }
</style>
</head>
<body>

<div id="hud">
  <span>ì²  âš™: <span id="iron">0</span></span>
  <span>ì„íƒ„ â›: <span id="coal">0</span></span>
  <span>ê¸ˆ ğŸ’°: <span id="gold">0</span></span>
</div>

<div id="lobby-screen" class="screen">
  <div>
    <h1>ğŸ­ Factory Corp</h1>
    <button onclick="goGame()">ğŸ® ê²Œì„ ì‹œì‘</button>
    <button onclick="goStore()">ğŸ›’ ìƒì </button>
  </div>
</div>

<div id="game-screen" class="screen">
  <div id="game-container">
    <h2>â›ï¸ ì±„êµ´ & ìƒì‚°</h2>
    <div id="conveyor"><div class="belt"></div></div>
    <div class="production-info">
      ìƒì‚°ê¸°: <span id="producers">0</span> (ì†ë„: <span id="rate">0</span>/ì´ˆ)
    </div>
    <button id="gather-btn">ğŸ”¨ ì²  ì±„êµ´ (ê¾¹ ëˆ„ë¥´ê¸°)</button><br>
    <button class="upgrade-btn" onclick="buyProducer()">ğŸ­ ìƒì‚°ê¸° êµ¬ë§¤ (ì²  10)</button>
    <button class="upgrade-btn" onclick="upgradeFactory()">ğŸ› ï¸ ì—…ê·¸ë ˆì´ë“œ (ì²  100)</button>
    <div style="margin-top:10px;">
      <button class="nav-btn" onclick="goStore()">ğŸ›’ ìƒì </button>
      <button class="nav-btn" onclick="goLobby()">ğŸ  ë¡œë¹„</button>
    </div>
  </div>
</div>

<div id="store-screen" class="screen">
  <div id="store-container">
    <h2>ğŸ›’ ìƒì </h2>
    <h3>ìë™í™”</h3>
    <button class="upgrade-btn" onclick="buyAutomation()">âš¡ ìë™ ìƒì‚°ê¸° (ì²  20)</button>
    <h3>ê±´ë¬¼</h3>
    <button class="upgrade-btn" onclick="buildFactory()">ğŸ—ï¸ ê³µì¥ ìƒì„±ê¸° (ì²  200)</button>
    <button class="upgrade-btn" onclick="buildPowerPlant()">ğŸ”‹ ë°œì „ì†Œ (ì²  200)</button>
    <button class="upgrade-btn" onclick="buildLab()">ğŸ”¬ ì—°êµ¬ì†Œ (ê¸ˆ 100)</button>
    <h3>ì¸ë ¥</h3>
    <button class="upgrade-btn" onclick="hireWorker()">ğŸ‘· ê·¼ë¡œì ê³ ìš© (ì²  50)</button>
    <h3>ì„¤ê³„ë„</h3>
    <button class="upgrade-btn" onclick="buyBlueprint()">ğŸ“œ ì„¤ê³„ë„ (ì²  100)</button>
    <div style="margin-top:10px;">
      <button onclick="goGame()">ğŸ® ê²Œì„ìœ¼ë¡œ</button>
      <button onclick="goLobby()">ğŸ  ë¡œë¹„</button>
    </div>
  </div>
</div>

<script>
// ìì›
let iron=0, coal=0, gold=0;
let producers=0, gatherRate=1, automationRate=0;
let gatherInterval=null;

// UI
function updateUI(){
  document.getElementById('iron').innerText=iron.toFixed(0);
  document.getElementById('coal').innerText=coal.toFixed(0);
  document.getElementById('gold').innerText=gold.toFixed(0);
  document.getElementById('producers').innerText=producers;
  document.getElementById('rate').innerText=(producers+automationRate).toFixed(1);
}

// ì»¨ë² ì´ì–´
function addConveyorItem(icon){
  const conveyor=document.getElementById('conveyor');
  const item=document.createElement('div');
  item.className='item';
  item.innerText=icon;
  item.style.left='-50px';
  item.style.animationDuration=(4+Math.random()*3)+'s';
  conveyor.appendChild(item);
  setTimeout(()=>{if(item.parentNode) conveyor.removeChild(item);},8000);
}

// ìˆ˜ë™ ì±„êµ´
const gatherBtn=document.getElementById("gather-btn");
function gather(){iron+=gatherRate; addConveyorItem('âš™'); updateUI();}
function startGather(){gather(); if(!gatherInterval) gatherInterval=setInterval(gather,150);}
function stopGather(){clearInterval(gatherInterval); gatherInterval=null;}
gatherBtn.addEventListener("mousedown",startGather);
gatherBtn.addEventListener("touchstart",startGather);
document.addEventListener("mouseup",stopGather);
document.addEventListener("touchend",stopGather);
document.addEventListener("mouseleave",stopGather);

// ê¸°ëŠ¥
function buyProducer(){if(iron>=10){iron-=10;producers++;updateUI();}else alert("ì²  ë¶€ì¡±!");}
function upgradeFactory(){if(iron>=100){iron-=100;gatherRate++;updateUI();}else alert("ì²  ë¶€ì¡±!");}
function buyAutomation(){if(iron>=20){iron-=20;automationRate++;updateUI();}else alert("ì²  ë¶€ì¡±!");}
function buildFactory(){if(iron>=200){iron-=200;producers+=5;addConveyorItem('âš™');updateUI();alert("ê³µì¥ ìƒì„±ê¸° ê±´ì„¤!");}else alert("ì²  ë¶€ì¡±!");}
function buildPowerPlant(){if(iron>=200){iron-=200;automationRate+=5;updateUI();alert("ë°œì „ì†Œ ê±´ì„¤!");}else alert("ì²  ë¶€ì¡±!");}
function buildLab(){if(gold>=100){gold-=100;gatherRate+=3;automationRate+=1;updateUI();alert("ì—°êµ¬ì†Œ ì„¤ë¦½!");}else alert("ê¸ˆ ë¶€ì¡±!");}
function hireWorker(){if(iron>=50){iron-=50;automationRate+=0.5;updateUI();alert("ê·¼ë¡œì ê³ ìš© ì™„ë£Œ!");}else alert("ì²  ë¶€ì¡±!");}
function buyBlueprint(){if(iron>=100){iron-=100;gatherRate+=2;automationRate+=2;updateUI();alert("ì„¤ê³„ë„ êµ¬ì…! ìƒì‚°ë ¥ ëŒ€í­ í–¥ìƒ!");}else alert("ì²  ë¶€ì¡±!");}

// ìë™ ìƒì‚°
setInterval(()=>{iron+=producers+automationRate;updateUI();},1000);

// í™”ë©´ ì „í™˜
function goLobby(){document.querySelectorAll('.screen').forEach(s=>s.style.display='none'); document.getElementById('lobby-screen').style.display='flex';}
function goGame(){document.querySelectorAll('.screen').forEach(s=>s.style.display='none'); document.getElementById('game-screen').style.display='flex';}
function goStore(){document.querySelectorAll('.screen').forEach(s=>s.style.display='none'); document.getElementById('store-screen').style.display='flex';}

// ì´ˆê¸° í™”ë©´
document.addEventListener("DOMContentLoaded",()=>{goLobby(); updateUI();});
</script>
</body>
</html>
